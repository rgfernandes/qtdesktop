#qzipreader lib
PROJECT (qzipreader)

FIND_PACKAGE (Qt4 REQUIRED)

INCLUDE_DIRECTORIES (${QT_QTGUI_INCLUDE_DIR}
        ${QT_QTCORE_INCLUDE_DIR}
		${qt_mkspecs_dirs}
		)

# with -fPIC
IF(UNIX AND NOT WIN32)
  FIND_PROGRAM(CMAKE_UNAME uname /bin /usr/bin /usr/local/bin )
  IF(CMAKE_UNAME)
    EXEC_PROGRAM(uname ARGS -m OUTPUT_VARIABLE CMAKE_SYSTEM_PROCESSOR)
    SET(CMAKE_SYSTEM_PROCESSOR ${CMAKE_SYSTEM_PROCESSOR} CACHE INTERNAL
"processor type (i386 and x86_64)")
    IF(CMAKE_SYSTEM_PROCESSOR MATCHES "x86_64")
      ADD_DEFINITIONS(-fPIC)
    ENDIF(CMAKE_SYSTEM_PROCESSOR MATCHES "x86_64")
  ENDIF(CMAKE_UNAME)
ENDIF(UNIX AND NOT WIN32)

SET (QZIPREADER_SOURCES
	qzip.cpp
)

ADD_LIBRARY (qzipreader STATIC ${QZIPREADER_SOURCES})

TARGET_LINK_LIBRARIES (qzipreader
        ${QT_LIBRARIES}
        ${QZIPREADER_LIBS}
        )

